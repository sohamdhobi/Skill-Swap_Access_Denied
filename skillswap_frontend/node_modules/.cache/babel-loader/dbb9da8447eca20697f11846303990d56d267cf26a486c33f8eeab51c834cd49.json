{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\soham_jhyepxn\\\\Desktop\\\\skill-swap\\\\Skill-Swap_Access_Denied\\\\skillswap_frontend\\\\src\\\\components\\\\VideoCall.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoCall = ({\n  meetingId,\n  participants,\n  onClose\n}) => {\n  _s();\n  console.log('VideoCall component rendered with meetingId:', meetingId);\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStream, setRemoteStream] = useState(null);\n  const [isScreenSharing, setIsScreenSharing] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isVideoOff, setIsVideoOff] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(true);\n  const [error, setError] = useState('');\n  const localVideoRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n  const peerConnectionRef = useRef(null);\n  useEffect(() => {\n    initializeVideoCall();\n    return () => {\n      cleanup();\n    };\n  }, []);\n  const initializeVideoCall = async () => {\n    try {\n      // Check if getUserMedia is supported\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        setError('Camera/microphone access is not supported in this browser. Please use a modern browser like Chrome, Firefox, or Safari.');\n        return;\n      }\n\n      // Check permissions first\n      const permissions = await navigator.permissions.query({\n        name: 'camera'\n      });\n      if (permissions.state === 'denied') {\n        setError('Camera access is blocked. Please allow camera access in your browser settings and refresh the page.');\n        return;\n      }\n\n      // Get user media with fallback options\n      let stream;\n      try {\n        // Try with both video and audio first\n        stream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: true\n        });\n      } catch (videoAudioError) {\n        console.log('Video+audio failed, trying video only:', videoAudioError);\n        try {\n          // Fallback to video only\n          stream = await navigator.mediaDevices.getUserMedia({\n            video: true,\n            audio: false\n          });\n        } catch (videoOnlyError) {\n          console.log('Video only failed, trying audio only:', videoOnlyError);\n          try {\n            // Fallback to audio only\n            stream = await navigator.mediaDevices.getUserMedia({\n              video: false,\n              audio: true\n            });\n          } catch (audioOnlyError) {\n            console.log('Audio only failed:', audioOnlyError);\n            throw new Error('No camera or microphone access available');\n          }\n        }\n      }\n      setLocalStream(stream);\n      if (localVideoRef.current) {\n        localVideoRef.current.srcObject = stream;\n      }\n\n      // Initialize WebRTC peer connection\n      const peerConnection = new RTCPeerConnection({\n        iceServers: [{\n          urls: 'stun:stun.l.google.com:19302'\n        }, {\n          urls: 'stun:stun1.l.google.com:19302'\n        }]\n      });\n      peerConnectionRef.current = peerConnection;\n\n      // Add local stream to peer connection\n      stream.getTracks().forEach(track => {\n        peerConnection.addTrack(track, stream);\n      });\n\n      // Handle incoming remote stream\n      peerConnection.ontrack = event => {\n        setRemoteStream(event.streams[0]);\n        if (remoteVideoRef.current) {\n          remoteVideoRef.current.srcObject = event.streams[0];\n        }\n        setIsConnecting(false);\n      };\n\n      // Handle connection state changes\n      peerConnection.onconnectionstatechange = () => {\n        if (peerConnection.connectionState === 'connected') {\n          setIsConnecting(false);\n        } else if (peerConnection.connectionState === 'failed') {\n          setError('Failed to establish connection. Please try again.');\n        }\n      };\n\n      // Create and send offer (in a real app, this would be sent through signaling server)\n      const offer = await peerConnection.createOffer();\n      await peerConnection.setLocalDescription(offer);\n\n      // Simulate receiving answer (in real app, this would come from signaling server)\n      setTimeout(() => {\n        simulateAnswer(peerConnection);\n      }, 1000);\n    } catch (err) {\n      console.error('Error accessing media devices:', err);\n      let errorMessage = 'Failed to access camera/microphone. ';\n      if (err.name === 'NotAllowedError') {\n        errorMessage += 'Please allow camera and microphone access when prompted, then refresh the page.';\n      } else if (err.name === 'NotFoundError') {\n        errorMessage += 'No camera or microphone found. Please check your device.';\n      } else if (err.name === 'NotReadableError') {\n        errorMessage += 'Camera or microphone is already in use by another application.';\n      } else if (err.name === 'OverconstrainedError') {\n        errorMessage += 'Camera or microphone does not meet the required constraints.';\n      } else if (err.name === 'TypeError') {\n        errorMessage += 'Camera or microphone access is not supported in this browser.';\n      } else {\n        errorMessage += 'Please check your browser settings and try again.';\n      }\n      setError(errorMessage);\n    }\n  };\n  const simulateAnswer = async peerConnection => {\n    try {\n      // Simulate receiving an answer from the other participant\n      const answer = await peerConnection.createAnswer();\n      await peerConnection.setRemoteDescription(answer);\n    } catch (err) {\n      console.error('Error simulating answer:', err);\n    }\n  };\n  const toggleMute = () => {\n    if (localStream) {\n      const audioTrack = localStream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsMuted(!audioTrack.enabled);\n      }\n    }\n  };\n  const toggleVideo = () => {\n    if (localStream) {\n      const videoTrack = localStream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoOff(!videoTrack.enabled);\n      }\n    }\n  };\n  const toggleScreenShare = async () => {\n    try {\n      if (!isScreenSharing) {\n        var _peerConnectionRef$cu;\n        const screenStream = await navigator.mediaDevices.getDisplayMedia({\n          video: true\n        });\n        const videoTrack = screenStream.getVideoTracks()[0];\n        const sender = (_peerConnectionRef$cu = peerConnectionRef.current) === null || _peerConnectionRef$cu === void 0 ? void 0 : _peerConnectionRef$cu.getSenders().find(s => {\n          var _s$track;\n          return ((_s$track = s.track) === null || _s$track === void 0 ? void 0 : _s$track.kind) === 'video';\n        });\n        if (sender && peerConnectionRef.current) {\n          sender.replaceTrack(videoTrack);\n          setLocalStream(screenStream);\n          if (localVideoRef.current) {\n            localVideoRef.current.srcObject = screenStream;\n          }\n          setIsScreenSharing(true);\n\n          // Stop screen sharing when user stops sharing\n          videoTrack.onended = () => {\n            toggleScreenShare();\n          };\n        }\n      } else {\n        var _peerConnectionRef$cu2;\n        // Switch back to camera\n        const cameraStream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: true\n        });\n        const videoTrack = cameraStream.getVideoTracks()[0];\n        const sender = (_peerConnectionRef$cu2 = peerConnectionRef.current) === null || _peerConnectionRef$cu2 === void 0 ? void 0 : _peerConnectionRef$cu2.getSenders().find(s => {\n          var _s$track2;\n          return ((_s$track2 = s.track) === null || _s$track2 === void 0 ? void 0 : _s$track2.kind) === 'video';\n        });\n        if (sender && peerConnectionRef.current) {\n          sender.replaceTrack(videoTrack);\n          setLocalStream(cameraStream);\n          if (localVideoRef.current) {\n            localVideoRef.current.srcObject = cameraStream;\n          }\n          setIsScreenSharing(false);\n        }\n      }\n    } catch (err) {\n      console.error('Error toggling screen share:', err);\n    }\n  };\n  const cleanup = () => {\n    if (localStream) {\n      localStream.getTracks().forEach(track => track.stop());\n    }\n    if (peerConnectionRef.current) {\n      peerConnectionRef.current.close();\n    }\n  };\n  const handleEndCall = () => {\n    cleanup();\n    onClose();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: '#000',\n      zIndex: 2000,\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        display: 'flex',\n        position: 'relative',\n        backgroundColor: '#1a1a1a'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: remoteVideoRef,\n        autoPlay: true,\n        playsInline: true,\n        style: {\n          width: '100%',\n          height: '100%',\n          objectFit: 'cover'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '20px',\n          right: '20px',\n          width: '200px',\n          height: '150px',\n          borderRadius: '8px',\n          overflow: 'hidden',\n          border: '2px solid #fff',\n          boxShadow: '0 4px 12px rgba(0,0,0,0.3)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: localVideoRef,\n          autoPlay: true,\n          playsInline: true,\n          muted: true,\n          style: {\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), isConnecting && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)',\n          backgroundColor: 'rgba(0,0,0,0.8)',\n          color: 'white',\n          padding: '20px',\n          borderRadius: '8px',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '10px'\n          },\n          children: \"\\uD83D\\uDD04\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Connecting to video call...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '14px',\n            marginTop: '10px'\n          },\n          children: \"Waiting for other participants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)',\n          backgroundColor: 'rgba(220,53,69,0.9)',\n          color: 'white',\n          padding: '20px',\n          borderRadius: '8px',\n          textAlign: 'center',\n          maxWidth: '500px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '10px',\n            fontSize: '24px'\n          },\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '15px',\n            fontSize: '16px'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '15px',\n            fontSize: '14px',\n            backgroundColor: 'rgba(255,255,255,0.1)',\n            padding: '10px',\n            borderRadius: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"How to fix:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            style: {\n              textAlign: 'left',\n              margin: '10px 0',\n              paddingLeft: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Click the camera/microphone icon in your browser's address bar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Select \\\"Allow\\\" for camera and microphone access\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Refresh the page and try again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Make sure no other app is using your camera\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px',\n            justifyContent: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setError('');\n              setIsConnecting(true);\n              initializeVideoCall();\n            },\n            style: {\n              padding: '10px 20px',\n              backgroundColor: '#28a745',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              fontSize: '14px'\n            },\n            children: \"\\uD83D\\uDD04 Try Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleEndCall,\n            style: {\n              padding: '10px 20px',\n              backgroundColor: 'white',\n              color: '#dc3545',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              fontSize: '14px'\n            },\n            children: \"End Call\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        backgroundColor: 'rgba(0,0,0,0.9)',\n        padding: '20px',\n        borderRadius: '50px',\n        display: 'flex',\n        gap: '20px',\n        alignItems: 'center',\n        zIndex: 9998\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          alert('Mute button clicked!');\n          toggleMute();\n        },\n        style: {\n          width: '70px',\n          height: '70px',\n          borderRadius: '50%',\n          border: '3px solid white',\n          backgroundColor: isMuted ? '#dc3545' : '#007bff',\n          color: 'white',\n          fontSize: '24px',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\n        },\n        children: isMuted ? '🔇' : '🎤'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          alert('Video button clicked!');\n          toggleVideo();\n        },\n        style: {\n          width: '70px',\n          height: '70px',\n          borderRadius: '50%',\n          border: '3px solid white',\n          backgroundColor: isVideoOff ? '#dc3545' : '#007bff',\n          color: 'white',\n          fontSize: '24px',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\n        },\n        children: isVideoOff ? '📷' : '📹'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          alert('Screen share button clicked!');\n          toggleScreenShare();\n        },\n        style: {\n          width: '70px',\n          height: '70px',\n          borderRadius: '50%',\n          border: '3px solid white',\n          backgroundColor: isScreenSharing ? '#28a745' : '#007bff',\n          color: 'white',\n          fontSize: '24px',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\n        },\n        children: \"\\uD83D\\uDCBB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          alert('End call button clicked!');\n          handleEndCall();\n        },\n        style: {\n          width: '80px',\n          height: '80px',\n          borderRadius: '50%',\n          border: '3px solid white',\n          backgroundColor: '#dc3545',\n          color: 'white',\n          fontSize: '28px',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\n        },\n        children: \"\\uD83D\\uDCDE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '20px',\n        left: '20px',\n        backgroundColor: 'rgba(0,0,0,0.7)',\n        color: 'white',\n        padding: '10px 15px',\n        borderRadius: '8px',\n        fontSize: '14px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 'bold',\n          marginBottom: '5px'\n        },\n        children: [\"Meeting #\", meetingId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Participants: \", participants.map(p => p.username).join(', ')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoCall, \"U92GCrC6mDbUGgdUJBGy9DnLgTk=\");\n_c = VideoCall;\nexport default VideoCall;\nvar _c;\n$RefreshReg$(_c, \"VideoCall\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","VideoCall","meetingId","participants","onClose","_s","console","log","localStream","setLocalStream","remoteStream","setRemoteStream","isScreenSharing","setIsScreenSharing","isMuted","setIsMuted","isVideoOff","setIsVideoOff","isConnecting","setIsConnecting","error","setError","localVideoRef","remoteVideoRef","peerConnectionRef","initializeVideoCall","cleanup","navigator","mediaDevices","getUserMedia","permissions","query","name","state","stream","video","audio","videoAudioError","videoOnlyError","audioOnlyError","Error","current","srcObject","peerConnection","RTCPeerConnection","iceServers","urls","getTracks","forEach","track","addTrack","ontrack","event","streams","onconnectionstatechange","connectionState","offer","createOffer","setLocalDescription","setTimeout","simulateAnswer","err","errorMessage","answer","createAnswer","setRemoteDescription","toggleMute","audioTrack","getAudioTracks","enabled","toggleVideo","videoTrack","getVideoTracks","toggleScreenShare","_peerConnectionRef$cu","screenStream","getDisplayMedia","sender","getSenders","find","s","_s$track","kind","replaceTrack","onended","_peerConnectionRef$cu2","cameraStream","_s$track2","stop","close","handleEndCall","style","position","top","left","right","bottom","backgroundColor","zIndex","display","flexDirection","children","flex","ref","autoPlay","playsInline","width","height","objectFit","fileName","_jsxFileName","lineNumber","columnNumber","borderRadius","overflow","border","boxShadow","muted","transform","color","padding","textAlign","marginBottom","fontSize","marginTop","maxWidth","margin","paddingLeft","gap","justifyContent","onClick","cursor","alignItems","alert","fontWeight","map","p","username","join","_c","$RefreshReg$"],"sources":["C:/Users/soham_jhyepxn/Desktop/skill-swap/Skill-Swap_Access_Denied/skillswap_frontend/src/components/VideoCall.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\ninterface VideoCallProps {\r\n  meetingId: number;\r\n  participants: { id: number; username: string }[];\r\n  onClose: () => void;\r\n}\r\n\r\nconst VideoCall: React.FC<VideoCallProps> = ({ meetingId, participants, onClose }) => {\r\n  console.log('VideoCall component rendered with meetingId:', meetingId);\r\n  const [localStream, setLocalStream] = useState<MediaStream | null>(null);\r\n  const [remoteStream, setRemoteStream] = useState<MediaStream | null>(null);\r\n  const [isScreenSharing, setIsScreenSharing] = useState(false);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isVideoOff, setIsVideoOff] = useState(false);\r\n  const [isConnecting, setIsConnecting] = useState(true);\r\n  const [error, setError] = useState<string>('');\r\n\r\n  const localVideoRef = useRef<HTMLVideoElement>(null);\r\n  const remoteVideoRef = useRef<HTMLVideoElement>(null);\r\n  const peerConnectionRef = useRef<RTCPeerConnection | null>(null);\r\n\r\n  useEffect(() => {\r\n    initializeVideoCall();\r\n    return () => {\r\n      cleanup();\r\n    };\r\n  }, []);\r\n\r\n  const initializeVideoCall = async () => {\r\n    try {\r\n      // Check if getUserMedia is supported\r\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n        setError('Camera/microphone access is not supported in this browser. Please use a modern browser like Chrome, Firefox, or Safari.');\r\n        return;\r\n      }\r\n\r\n      // Check permissions first\r\n      const permissions = await navigator.permissions.query({ name: 'camera' as PermissionName });\r\n      if (permissions.state === 'denied') {\r\n        setError('Camera access is blocked. Please allow camera access in your browser settings and refresh the page.');\r\n        return;\r\n      }\r\n\r\n      // Get user media with fallback options\r\n      let stream: MediaStream;\r\n      try {\r\n        // Try with both video and audio first\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n          audio: true\r\n        });\r\n      } catch (videoAudioError) {\r\n        console.log('Video+audio failed, trying video only:', videoAudioError);\r\n        try {\r\n          // Fallback to video only\r\n          stream = await navigator.mediaDevices.getUserMedia({\r\n            video: true,\r\n            audio: false\r\n          });\r\n        } catch (videoOnlyError) {\r\n          console.log('Video only failed, trying audio only:', videoOnlyError);\r\n          try {\r\n            // Fallback to audio only\r\n            stream = await navigator.mediaDevices.getUserMedia({\r\n              video: false,\r\n              audio: true\r\n            });\r\n          } catch (audioOnlyError) {\r\n            console.log('Audio only failed:', audioOnlyError);\r\n            throw new Error('No camera or microphone access available');\r\n          }\r\n        }\r\n      }\r\n\r\n      setLocalStream(stream);\r\n      if (localVideoRef.current) {\r\n        localVideoRef.current.srcObject = stream;\r\n      }\r\n\r\n      // Initialize WebRTC peer connection\r\n      const peerConnection = new RTCPeerConnection({\r\n        iceServers: [\r\n          { urls: 'stun:stun.l.google.com:19302' },\r\n          { urls: 'stun:stun1.l.google.com:19302' }\r\n        ]\r\n      });\r\n\r\n      peerConnectionRef.current = peerConnection;\r\n\r\n      // Add local stream to peer connection\r\n      stream.getTracks().forEach(track => {\r\n        peerConnection.addTrack(track, stream);\r\n      });\r\n\r\n      // Handle incoming remote stream\r\n      peerConnection.ontrack = (event) => {\r\n        setRemoteStream(event.streams[0]);\r\n        if (remoteVideoRef.current) {\r\n          remoteVideoRef.current.srcObject = event.streams[0];\r\n        }\r\n        setIsConnecting(false);\r\n      };\r\n\r\n      // Handle connection state changes\r\n      peerConnection.onconnectionstatechange = () => {\r\n        if (peerConnection.connectionState === 'connected') {\r\n          setIsConnecting(false);\r\n        } else if (peerConnection.connectionState === 'failed') {\r\n          setError('Failed to establish connection. Please try again.');\r\n        }\r\n      };\r\n\r\n      // Create and send offer (in a real app, this would be sent through signaling server)\r\n      const offer = await peerConnection.createOffer();\r\n      await peerConnection.setLocalDescription(offer);\r\n\r\n      // Simulate receiving answer (in real app, this would come from signaling server)\r\n      setTimeout(() => {\r\n        simulateAnswer(peerConnection);\r\n      }, 1000);\r\n\r\n    } catch (err: any) {\r\n      console.error('Error accessing media devices:', err);\r\n      \r\n      let errorMessage = 'Failed to access camera/microphone. ';\r\n      \r\n      if (err.name === 'NotAllowedError') {\r\n        errorMessage += 'Please allow camera and microphone access when prompted, then refresh the page.';\r\n      } else if (err.name === 'NotFoundError') {\r\n        errorMessage += 'No camera or microphone found. Please check your device.';\r\n      } else if (err.name === 'NotReadableError') {\r\n        errorMessage += 'Camera or microphone is already in use by another application.';\r\n      } else if (err.name === 'OverconstrainedError') {\r\n        errorMessage += 'Camera or microphone does not meet the required constraints.';\r\n      } else if (err.name === 'TypeError') {\r\n        errorMessage += 'Camera or microphone access is not supported in this browser.';\r\n      } else {\r\n        errorMessage += 'Please check your browser settings and try again.';\r\n      }\r\n      \r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  const simulateAnswer = async (peerConnection: RTCPeerConnection) => {\r\n    try {\r\n      // Simulate receiving an answer from the other participant\r\n      const answer = await peerConnection.createAnswer();\r\n      await peerConnection.setRemoteDescription(answer);\r\n    } catch (err) {\r\n      console.error('Error simulating answer:', err);\r\n    }\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    if (localStream) {\r\n      const audioTrack = localStream.getAudioTracks()[0];\r\n      if (audioTrack) {\r\n        audioTrack.enabled = !audioTrack.enabled;\r\n        setIsMuted(!audioTrack.enabled);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleVideo = () => {\r\n    if (localStream) {\r\n      const videoTrack = localStream.getVideoTracks()[0];\r\n      if (videoTrack) {\r\n        videoTrack.enabled = !videoTrack.enabled;\r\n        setIsVideoOff(!videoTrack.enabled);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleScreenShare = async () => {\r\n    try {\r\n      if (!isScreenSharing) {\r\n        const screenStream = await navigator.mediaDevices.getDisplayMedia({\r\n          video: true\r\n        });\r\n\r\n        const videoTrack = screenStream.getVideoTracks()[0];\r\n        const sender = peerConnectionRef.current?.getSenders().find(\r\n          s => s.track?.kind === 'video'\r\n        );\r\n\r\n        if (sender && peerConnectionRef.current) {\r\n          sender.replaceTrack(videoTrack);\r\n          setLocalStream(screenStream);\r\n          if (localVideoRef.current) {\r\n            localVideoRef.current.srcObject = screenStream;\r\n          }\r\n          setIsScreenSharing(true);\r\n\r\n          // Stop screen sharing when user stops sharing\r\n          videoTrack.onended = () => {\r\n            toggleScreenShare();\r\n          };\r\n        }\r\n      } else {\r\n        // Switch back to camera\r\n        const cameraStream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n          audio: true\r\n        });\r\n\r\n        const videoTrack = cameraStream.getVideoTracks()[0];\r\n        const sender = peerConnectionRef.current?.getSenders().find(\r\n          s => s.track?.kind === 'video'\r\n        );\r\n\r\n        if (sender && peerConnectionRef.current) {\r\n          sender.replaceTrack(videoTrack);\r\n          setLocalStream(cameraStream);\r\n          if (localVideoRef.current) {\r\n            localVideoRef.current.srcObject = cameraStream;\r\n          }\r\n          setIsScreenSharing(false);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Error toggling screen share:', err);\r\n    }\r\n  };\r\n\r\n  const cleanup = () => {\r\n    if (localStream) {\r\n      localStream.getTracks().forEach(track => track.stop());\r\n    }\r\n    if (peerConnectionRef.current) {\r\n      peerConnectionRef.current.close();\r\n    }\r\n  };\r\n\r\n  const handleEndCall = () => {\r\n    cleanup();\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: '#000',\r\n      zIndex: 2000,\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }}>\r\n      {/* Video Container */}\r\n      <div style={{\r\n        flex: 1,\r\n        display: 'flex',\r\n        position: 'relative',\r\n        backgroundColor: '#1a1a1a'\r\n      }}>\r\n        {/* Remote Video (Main) */}\r\n        <video\r\n          ref={remoteVideoRef}\r\n          autoPlay\r\n          playsInline\r\n          style={{\r\n            width: '100%',\r\n            height: '100%',\r\n            objectFit: 'cover'\r\n          }}\r\n        />\r\n\r\n        {/* Local Video (Picture-in-Picture) */}\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '20px',\r\n          right: '20px',\r\n          width: '200px',\r\n          height: '150px',\r\n          borderRadius: '8px',\r\n          overflow: 'hidden',\r\n          border: '2px solid #fff',\r\n          boxShadow: '0 4px 12px rgba(0,0,0,0.3)'\r\n        }}>\r\n          <video\r\n            ref={localVideoRef}\r\n            autoPlay\r\n            playsInline\r\n            muted\r\n            style={{\r\n              width: '100%',\r\n              height: '100%',\r\n              objectFit: 'cover'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Connection Status */}\r\n        {isConnecting && (\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            backgroundColor: 'rgba(0,0,0,0.8)',\r\n            color: 'white',\r\n            padding: '20px',\r\n            borderRadius: '8px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ marginBottom: '10px' }}>🔄</div>\r\n            <div>Connecting to video call...</div>\r\n            <div style={{ fontSize: '14px', marginTop: '10px' }}>\r\n              Waiting for other participants\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Error Message */}\r\n        {error && (\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            backgroundColor: 'rgba(220,53,69,0.9)',\r\n            color: 'white',\r\n            padding: '20px',\r\n            borderRadius: '8px',\r\n            textAlign: 'center',\r\n            maxWidth: '500px'\r\n          }}>\r\n            <div style={{ marginBottom: '10px', fontSize: '24px' }}>❌</div>\r\n            <div style={{ marginBottom: '15px', fontSize: '16px' }}>{error}</div>\r\n            \r\n            <div style={{ \r\n              marginBottom: '15px', \r\n              fontSize: '14px', \r\n              backgroundColor: 'rgba(255,255,255,0.1)', \r\n              padding: '10px', \r\n              borderRadius: '5px' \r\n            }}>\r\n              <strong>How to fix:</strong>\r\n              <ul style={{ textAlign: 'left', margin: '10px 0', paddingLeft: '20px' }}>\r\n                <li>Click the camera/microphone icon in your browser's address bar</li>\r\n                <li>Select \"Allow\" for camera and microphone access</li>\r\n                <li>Refresh the page and try again</li>\r\n                <li>Make sure no other app is using your camera</li>\r\n              </ul>\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>\r\n              <button\r\n                onClick={() => {\r\n                  setError('');\r\n                  setIsConnecting(true);\r\n                  initializeVideoCall();\r\n                }}\r\n                style={{\r\n                  padding: '10px 20px',\r\n                  backgroundColor: '#28a745',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '4px',\r\n                  cursor: 'pointer',\r\n                  fontSize: '14px'\r\n                }}\r\n              >\r\n                🔄 Try Again\r\n              </button>\r\n              <button\r\n                onClick={handleEndCall}\r\n                style={{\r\n                  padding: '10px 20px',\r\n                  backgroundColor: 'white',\r\n                  color: '#dc3545',\r\n                  border: 'none',\r\n                  borderRadius: '4px',\r\n                  cursor: 'pointer',\r\n                  fontSize: '14px'\r\n                }}\r\n              >\r\n                End Call\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Controls - Simplified */}\r\n      <div style={{\r\n        position: 'fixed',\r\n        bottom: '20px',\r\n        left: '50%',\r\n        transform: 'translateX(-50%)',\r\n        backgroundColor: 'rgba(0,0,0,0.9)',\r\n        padding: '20px',\r\n        borderRadius: '50px',\r\n        display: 'flex',\r\n        gap: '20px',\r\n        alignItems: 'center',\r\n        zIndex: 9998\r\n      }}>\r\n        <button\r\n          onClick={() => {\r\n            alert('Mute button clicked!');\r\n            toggleMute();\r\n          }}\r\n          style={{\r\n            width: '70px',\r\n            height: '70px',\r\n            borderRadius: '50%',\r\n            border: '3px solid white',\r\n            backgroundColor: isMuted ? '#dc3545' : '#007bff',\r\n            color: 'white',\r\n            fontSize: '24px',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\r\n          }}\r\n        >\r\n          {isMuted ? '🔇' : '🎤'}\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => {\r\n            alert('Video button clicked!');\r\n            toggleVideo();\r\n          }}\r\n          style={{\r\n            width: '70px',\r\n            height: '70px',\r\n            borderRadius: '50%',\r\n            border: '3px solid white',\r\n            backgroundColor: isVideoOff ? '#dc3545' : '#007bff',\r\n            color: 'white',\r\n            fontSize: '24px',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\r\n          }}\r\n        >\r\n          {isVideoOff ? '📷' : '📹'}\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => {\r\n            alert('Screen share button clicked!');\r\n            toggleScreenShare();\r\n          }}\r\n          style={{\r\n            width: '70px',\r\n            height: '70px',\r\n            borderRadius: '50%',\r\n            border: '3px solid white',\r\n            backgroundColor: isScreenSharing ? '#28a745' : '#007bff',\r\n            color: 'white',\r\n            fontSize: '24px',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\r\n          }}\r\n        >\r\n          💻\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => {\r\n            alert('End call button clicked!');\r\n            handleEndCall();\r\n          }}\r\n          style={{\r\n            width: '80px',\r\n            height: '80px',\r\n            borderRadius: '50%',\r\n            border: '3px solid white',\r\n            backgroundColor: '#dc3545',\r\n            color: 'white',\r\n            fontSize: '28px',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\r\n          }}\r\n        >\r\n          📞\r\n        </button>\r\n      </div>\r\n\r\n      {/* Meeting Info */}\r\n      <div style={{\r\n        position: 'absolute',\r\n        top: '20px',\r\n        left: '20px',\r\n        backgroundColor: 'rgba(0,0,0,0.7)',\r\n        color: 'white',\r\n        padding: '10px 15px',\r\n        borderRadius: '8px',\r\n        fontSize: '14px'\r\n      }}>\r\n        <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\r\n          Meeting #{meetingId}\r\n        </div>\r\n        <div>\r\n          Participants: {participants.map(p => p.username).join(', ')}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoCall; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}