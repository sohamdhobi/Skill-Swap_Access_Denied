{"ast":null,"code":"import React,{useState,useEffect}from'react';import{chatsAPI}from'../services/api';import ChatComponent from'../components/Chat';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatList=()=>{const[chats,setChats]=useState([]);const[selectedChat,setSelectedChat]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{loadChats();},[]);const loadChats=async()=>{try{setLoading(true);const response=await chatsAPI.getAll();setChats(response.data);}catch(err){setError('Failed to load chats. Please try again.');}finally{setLoading(false);}};const handleChatSelect=chat=>{setSelectedChat(chat);};const handleCloseChat=()=>{setSelectedChat(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'50px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})})})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error})});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:'800px',margin:'50px auto'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0'},children:\"My Chats\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:chats.length===0?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'40px'},children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',fontSize:'16px'},children:\"No chats yet. Start a skill swap to begin chatting!\"})}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1',maxWidth:'300px'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Conversations\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'400px',overflowY:'auto'},children:chats.map(chat=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleChatSelect(chat),style:{padding:'15px',border:'1px solid #ddd',borderRadius:'8px',marginBottom:'10px',cursor:'pointer',backgroundColor:(selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)===chat.id?'#f8f9fa':'white',transition:'background-color 0.2s'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',marginBottom:'5px'},children:chat.participant_names.join(' & ')}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#666'},children:\"No messages yet\"})]},chat.id))})]}),selectedChat&&/*#__PURE__*/_jsxs(\"div\",{style:{flex:'2'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Chat with \",selectedChat.participant_names.join(' & ')]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseChat,className:\"btn btn-sm btn-outline-secondary\",children:\"Close\"})]}),/*#__PURE__*/_jsx(ChatComponent,{chatId:selectedChat.id,participants:selectedChat.participant_names.map((name,index)=>({id:selectedChat.participants[index],username:name}))})]})]})})]})})});};export default ChatList;","map":{"version":3,"names":["React","useState","useEffect","chatsAPI","ChatComponent","jsx","_jsx","jsxs","_jsxs","ChatList","chats","setChats","selectedChat","setSelectedChat","loading","setLoading","error","setError","loadChats","response","getAll","data","err","handleChatSelect","chat","handleCloseChat","className","children","style","textAlign","marginTop","role","maxWidth","margin","length","padding","color","fontSize","display","gap","flex","maxHeight","overflowY","map","onClick","border","borderRadius","marginBottom","cursor","backgroundColor","id","transition","fontWeight","participant_names","join","justifyContent","alignItems","chatId","participants","name","index","username"],"sources":["C:/Users/soham_jhyepxn/Desktop/skill-swap/Skill-Swap_Access_Denied/skillswap_frontend/src/pages/ChatList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { chatsAPI } from '../services/api';\r\nimport { Chat } from '../types';\r\nimport ChatComponent from '../components/Chat';\r\n\r\nconst ChatList: React.FC = () => {\r\n  const [chats, setChats] = useState<Chat[]>([]);\r\n  const [selectedChat, setSelectedChat] = useState<Chat | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n    loadChats();\r\n  }, []);\r\n\r\n  const loadChats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await chatsAPI.getAll();\r\n      setChats(response.data);\r\n    } catch (err: any) {\r\n      setError('Failed to load chats. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChatSelect = (chat: Chat) => {\r\n    setSelectedChat(chat);\r\n  };\r\n\r\n  const handleCloseChat = () => {\r\n    setSelectedChat(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container\">\r\n        <div style={{ textAlign: 'center', marginTop: '50px' }}>\r\n          <div className=\"spinner-border\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"alert alert-danger\">\r\n          {error}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div style={{ maxWidth: '800px', margin: '50px auto' }}>\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <h2 style={{ margin: '0' }}>My Chats</h2>\r\n          </div>\r\n          \r\n          <div className=\"card-body\">\r\n            {chats.length === 0 ? (\r\n              <div style={{ textAlign: 'center', padding: '40px' }}>\r\n                <p style={{ color: '#666', fontSize: '16px' }}>\r\n                  No chats yet. Start a skill swap to begin chatting!\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div style={{ display: 'flex', gap: '20px' }}>\r\n                {/* Chat List */}\r\n                <div style={{ flex: '1', maxWidth: '300px' }}>\r\n                  <h4>Conversations</h4>\r\n                  <div style={{ maxHeight: '400px', overflowY: 'auto' }}>\r\n                    {chats.map((chat) => (\r\n                      <div\r\n                        key={chat.id}\r\n                        onClick={() => handleChatSelect(chat)}\r\n                        style={{\r\n                          padding: '15px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '8px',\r\n                          marginBottom: '10px',\r\n                          cursor: 'pointer',\r\n                          backgroundColor: selectedChat?.id === chat.id ? '#f8f9fa' : 'white',\r\n                          transition: 'background-color 0.2s'\r\n                        }}\r\n                      >\r\n                        <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\r\n                          {chat.participant_names.join(' & ')}\r\n                        </div>\r\n                        <div style={{ fontSize: '12px', color: '#666' }}>\r\n                          No messages yet\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Chat Component */}\r\n                {selectedChat && (\r\n                  <div style={{ flex: '2' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>\r\n                      <h4>Chat with {selectedChat.participant_names.join(' & ')}</h4>\r\n                      <button\r\n                        onClick={handleCloseChat}\r\n                        className=\"btn btn-sm btn-outline-secondary\"\r\n                      >\r\n                        Close\r\n                      </button>\r\n                    </div>\r\n                    <ChatComponent \r\n                      chatId={selectedChat.id} \r\n                      participants={selectedChat.participant_names.map((name, index) => ({ \r\n                        id: selectedChat.participants[index], \r\n                        username: name \r\n                      }))}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}