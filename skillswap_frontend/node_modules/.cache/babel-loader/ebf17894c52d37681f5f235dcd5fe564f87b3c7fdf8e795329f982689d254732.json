{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\soham_jhyepxn\\\\Desktop\\\\skill-swap\\\\Skill-Swap_Access_Denied\\\\skillswap_frontend\\\\src\\\\components\\\\Chat.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { messagesAPI, meetingsAPI, notificationsAPI } from '../services/api';\nimport MeetingModal from './MeetingModal';\nimport VideoCall from './VideoCall';\nimport MeetingNotification from './MeetingNotification';\nimport NotificationPanel from './NotificationPanel';\n\n// Test if VideoCall component is imported\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconsole.log('VideoCall component imported:', VideoCall);\nconst Chat = ({\n  chatId,\n  participants\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [meetings, setMeetings] = useState([]);\n  const [notifications, setNotifications] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n  const [error, setError] = useState('');\n  const [showMeetingModal, setShowMeetingModal] = useState(false);\n  const [showMeetings, setShowMeetings] = useState(false);\n  const [activeVideoCall, setActiveVideoCall] = useState(null);\n  const [meetingNotification, setMeetingNotification] = useState(null);\n  const [showNotificationPanel, setShowNotificationPanel] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  // Debug logging\n  console.log('Chat component rendered, activeVideoCall:', activeVideoCall);\n\n  // Add a visible indicator if activeVideoCall exists\n  if (activeVideoCall) {\n    console.log('ACTIVE VIDEO CALL EXISTS!', activeVideoCall);\n  }\n  const messagesEndRef = useRef(null);\n  const currentUsername = localStorage.getItem('username');\n  useEffect(() => {\n    fetchMessages();\n    fetchMeetings();\n    fetchNotifications();\n    fetchUnreadCount();\n\n    // Poll for new messages and notifications every 10 seconds\n    const interval = setInterval(() => {\n      fetchMessages();\n      fetchNotifications();\n      fetchUnreadCount();\n    }, 10000);\n    return () => {\n      console.log('Clearing polling interval');\n      clearInterval(interval);\n    };\n  }, [chatId]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const fetchMessages = async () => {\n    try {\n      const response = await messagesAPI.getMessages(chatId);\n      setMessages(response.data);\n    } catch (err) {\n      setError('Failed to load messages. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMeetings = async () => {\n    try {\n      const response = await meetingsAPI.getAll();\n      // Filter meetings for this chat\n      const chatMeetings = response.data.filter(meeting => meeting.chat === chatId);\n      setMeetings(chatMeetings);\n    } catch (err) {\n      console.error('Failed to load meetings:', err);\n    }\n  };\n  const fetchNotifications = async () => {\n    try {\n      const response = await notificationsAPI.getAll();\n      setNotifications(response.data);\n\n      // Check for meeting notifications\n      const meetingNotifications = response.data.filter(n => n.notification_type === 'MEETING_STARTED' && n.related_meeting && !n.read);\n      if (meetingNotifications.length > 0) {\n        const latestNotification = meetingNotifications[0];\n        // Find the corresponding meeting\n        const meeting = meetings.find(m => m.id === latestNotification.related_meeting);\n        if (meeting && meeting.organizer_name !== currentUsername) {\n          setMeetingNotification(meeting);\n        }\n      }\n    } catch (err) {\n      console.error('Failed to load notifications:', err);\n    }\n  };\n  const fetchUnreadCount = async () => {\n    try {\n      const response = await notificationsAPI.getUnreadCount();\n      setUnreadCount(response.data.unread_count);\n    } catch (err) {\n      console.error('Failed to get unread count:', err);\n    }\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    setSending(true);\n    setError('');\n    try {\n      const messageData = {\n        chat: chatId,\n        content: newMessage.trim()\n      };\n      const response = await messagesAPI.createMessage(messageData);\n      setMessages([...messages, response.data]);\n      setNewMessage('');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to send message. Please try again.');\n    } finally {\n      setSending(false);\n    }\n  };\n  const handleMeetingCreated = meeting => {\n    setMeetings([...meetings, meeting]);\n  };\n  const handleMeetingNotificationJoin = meeting => {\n    setActiveVideoCall(meeting);\n    setMeetingNotification(null);\n  };\n  const handleMeetingNotificationDismiss = () => {\n    setMeetingNotification(null);\n  };\n  const handleJoinMeetingFromNotification = meeting => {\n    setActiveVideoCall(meeting);\n    // Mark notification as read\n    const notification = notifications.find(n => n.notification_type === 'MEETING_STARTED' && n.related_meeting === meeting.id);\n    if (notification) {\n      handleMarkNotificationAsRead(notification.id);\n    }\n  };\n  const handleDismissNotification = notificationId => {\n    setNotifications(prev => prev.filter(n => n.id !== notificationId));\n  };\n  const handleMarkNotificationAsRead = async notificationId => {\n    try {\n      await notificationsAPI.markAsRead(notificationId);\n      setNotifications(prev => prev.map(n => n.id === notificationId ? {\n        ...n,\n        read: true\n      } : n));\n      fetchUnreadCount();\n    } catch (err) {\n      console.error('Failed to mark notification as read:', err);\n    }\n  };\n  const handleClearAllNotifications = async () => {\n    try {\n      await notificationsAPI.clearAll();\n      setNotifications([]);\n      setMeetingNotification(null);\n      setUnreadCount(0);\n      console.log('All notifications cleared');\n    } catch (err) {\n      console.error('Failed to clear notifications:', err);\n    }\n  };\n  const handleJoinMeeting = async meeting => {\n    try {\n      await meetingsAPI.joinMeeting(meeting.id);\n      setActiveVideoCall(meeting);\n    } catch (err) {\n      setError('Failed to join meeting. Please try again.');\n    }\n  };\n  const handleStartMeeting = async meeting => {\n    console.log('Starting meeting:', meeting);\n    try {\n      await meetingsAPI.startMeeting(meeting.id);\n      console.log('Meeting started successfully, setting active video call');\n      setActiveVideoCall(meeting);\n      fetchMeetings(); // Refresh meetings list\n    } catch (err) {\n      console.error('Failed to start meeting:', err);\n      setError('Failed to start meeting. Please try again.');\n    }\n  };\n  const formatTime = dateString => {\n    return new Date(dateString).toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const formatDateTime = dateString => {\n    return new Date(dateString).toLocaleString();\n  };\n  const getMeetingStatusColor = status => {\n    switch (status) {\n      case 'ONGOING':\n        return '#28a745';\n      case 'COMPLETED':\n        return '#6c757d';\n      case 'CANCELLED':\n        return '#dc3545';\n      default:\n        return '#007bff';\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading chat...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '500px',\n      border: '1px solid #ddd',\n      borderRadius: '8px',\n      overflow: 'hidden',\n      position: 'relative'\n    },\n    children: [activeVideoCall && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        right: '0px',\n        backgroundColor: 'red',\n        color: 'white',\n        padding: '5px',\n        textAlign: 'center',\n        zIndex: 1000,\n        fontSize: '12px'\n      },\n      children: [\"\\uD83D\\uDEA8 VIDEO CALL ACTIVE - Meeting ID: \", activeVideoCall.id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#f8f9fa',\n        padding: '15px',\n        borderBottom: '1px solid #ddd',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0\n          },\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: '14px',\n            color: '#666'\n          },\n          children: participants.map(p => p.username).join(' & ')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowNotificationPanel(!showNotificationPanel),\n          className: \"btn btn-outline-info\",\n          style: {\n            fontSize: '12px',\n            padding: '5px 10px',\n            position: 'relative'\n          },\n          children: [\"\\uD83D\\uDD14 Notifications\", unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              position: 'absolute',\n              top: '-5px',\n              right: '-5px',\n              backgroundColor: '#dc3545',\n              color: 'white',\n              borderRadius: '50%',\n              width: '18px',\n              height: '18px',\n              fontSize: '10px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center'\n            },\n            children: unreadCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowMeetings(!showMeetings),\n          className: \"btn btn-outline-primary\",\n          style: {\n            fontSize: '12px',\n            padding: '5px 10px'\n          },\n          children: [\"\\uD83D\\uDCC5 Meetings (\", meetings.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowMeetingModal(true),\n          className: \"btn btn-success\",\n          style: {\n            fontSize: '12px',\n            padding: '5px 10px'\n          },\n          children: \"\\uD83D\\uDE80 Start Meeting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            alert('Test button clicked!');\n            console.log('Test video call button clicked');\n            setActiveVideoCall({\n              id: 999,\n              title: 'Test Meeting',\n              description: 'Test meeting for debugging',\n              organizer: 1,\n              organizer_name: 'Test User',\n              chat: chatId,\n              scheduled_at: undefined,\n              duration_minutes: 30,\n              status: 'ONGOING',\n              created_at: new Date().toISOString()\n            });\n          },\n          className: \"btn btn-warning\",\n          style: {\n            fontSize: '12px',\n            padding: '5px 10px',\n            backgroundColor: 'orange',\n            color: 'white',\n            border: '2px solid red'\n          },\n          children: \"\\uD83E\\uDDEA Test Video Call\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            alert('Simple test button clicked!');\n            document.body.innerHTML += '<div style=\"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:red;color:white;padding:20px;z-index:9999;\">SIMPLE TEST - BUTTONS WORK!</div>';\n          },\n          className: \"btn btn-danger\",\n          style: {\n            fontSize: '12px',\n            padding: '5px 10px',\n            backgroundColor: 'red',\n            color: 'white',\n            border: '2px solid black'\n          },\n          children: \"\\uD83D\\uDD25 Simple Test\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), showMeetings && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#f8f9fa',\n        borderBottom: '1px solid #ddd',\n        padding: '15px',\n        maxHeight: '200px',\n        overflowY: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: '0 0 10px 0',\n          fontSize: '14px'\n        },\n        children: \"\\uD83D\\uDCC5 Meetings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 11\n      }, this), meetings.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '12px',\n          color: '#666',\n          margin: 0\n        },\n        children: \"No meetings scheduled. Start a meeting to begin video calls!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '10px'\n        },\n        children: meetings.map(meeting => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: 'white',\n            padding: '10px',\n            borderRadius: '5px',\n            border: '1px solid #ddd'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                style: {\n                  margin: '0 0 5px 0',\n                  fontSize: '13px'\n                },\n                children: meeting.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: '11px',\n                  color: '#666'\n                },\n                children: [meeting.scheduled_at ? 'ðŸ“… Scheduled' : 'ðŸš€ Instant', meeting.scheduled_at && ` - ${formatDateTime(meeting.scheduled_at)}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '5px 0 0 0',\n                  fontSize: '11px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: getMeetingStatusColor(meeting.status),\n                    fontWeight: 'bold'\n                  },\n                  children: meeting.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 25\n                }, this), meeting.duration_minutes && ` â€¢ ${meeting.duration_minutes} min`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '5px'\n              },\n              children: [meeting.status === 'SCHEDULED' && meeting.organizer_name === currentUsername && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleStartMeeting(meeting),\n                className: \"btn btn-success\",\n                style: {\n                  fontSize: '10px',\n                  padding: '3px 8px'\n                },\n                children: \"Start\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 25\n              }, this), meeting.status === 'ONGOING' && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleJoinMeeting(meeting),\n                className: \"btn btn-primary\",\n                style: {\n                  fontSize: '10px',\n                  padding: '3px 8px'\n                },\n                children: \"Join\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 19\n          }, this)\n        }, meeting.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: '15px',\n        backgroundColor: '#f9f9f9'\n      },\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        style: {\n          marginBottom: '15px'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this), messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          color: '#666',\n          marginTop: '50px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No messages yet. Start the conversation!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '14px'\n          },\n          children: \"\\uD83D\\uDCA1 Share tips, ask questions, or discuss your skills\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '14px'\n          },\n          children: \"\\uD83D\\uDE80 Click \\\"Start Meeting\\\" to begin video calls\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '10px'\n        },\n        children: [messages.map(message => {\n          const isOwnMessage = message.sender_name === currentUsername;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: isOwnMessage ? 'flex-end' : 'flex-start',\n              marginBottom: '10px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxWidth: '70%',\n                padding: '10px 15px',\n                borderRadius: '15px',\n                backgroundColor: isOwnMessage ? '#007bff' : 'white',\n                color: isOwnMessage ? 'white' : '#333',\n                boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n                wordWrap: 'break-word'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  marginBottom: '5px',\n                  opacity: 0.8\n                },\n                children: message.sender_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '5px'\n                },\n                children: message.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '10px',\n                  opacity: 0.7,\n                  textAlign: 'right'\n                },\n                children: formatTime(message.created_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 19\n            }, this)\n          }, message.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 17\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSendMessage,\n      style: {\n        padding: '15px',\n        borderTop: '1px solid #ddd',\n        backgroundColor: 'white'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          placeholder: \"Type your message...\",\n          style: {\n            flex: 1,\n            padding: '10px',\n            border: '1px solid #ddd',\n            borderRadius: '5px',\n            fontSize: '14px'\n          },\n          disabled: sending\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: sending || !newMessage.trim(),\n          className: \"btn btn-primary\",\n          style: {\n            padding: '10px 20px'\n          },\n          children: sending ? 'Sending...' : 'Send'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 7\n    }, this), showMeetingModal && /*#__PURE__*/_jsxDEV(MeetingModal, {\n      chatId: chatId,\n      participants: participants,\n      onClose: () => setShowMeetingModal(false),\n      onMeetingCreated: handleMeetingCreated,\n      onStartVideoCall: setActiveVideoCall\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 9\n    }, this), activeVideoCall && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          top: '10px',\n          right: '10px',\n          backgroundColor: 'red',\n          color: 'white',\n          padding: '10px',\n          zIndex: 3000,\n          borderRadius: '5px'\n        },\n        children: [\"DEBUG: Video Call Active - Meeting ID: \", activeVideoCall.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(VideoCall, {\n        meetingId: activeVideoCall.id,\n        participants: participants,\n        onClose: () => setActiveVideoCall(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 576,\n      columnNumber: 9\n    }, this), meetingNotification && /*#__PURE__*/_jsxDEV(MeetingNotification, {\n      meeting: meetingNotification,\n      onJoin: handleMeetingNotificationJoin,\n      onDismiss: handleMeetingNotificationDismiss\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 9\n    }, this), showNotificationPanel && /*#__PURE__*/_jsxDEV(NotificationPanel, {\n      notifications: notifications,\n      onJoinMeeting: handleJoinMeetingFromNotification,\n      onDismissNotification: handleDismissNotification,\n      onMarkAsRead: handleMarkNotificationAsRead,\n      onClearAll: handleClearAllNotifications,\n      onClose: () => setShowNotificationPanel(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"nLxB0oSfMTUdAy2JmKf9zM7J6Yc=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","messagesAPI","meetingsAPI","notificationsAPI","MeetingModal","VideoCall","MeetingNotification","NotificationPanel","jsxDEV","_jsxDEV","console","log","Chat","chatId","participants","_s","messages","setMessages","meetings","setMeetings","notifications","setNotifications","newMessage","setNewMessage","loading","setLoading","sending","setSending","error","setError","showMeetingModal","setShowMeetingModal","showMeetings","setShowMeetings","activeVideoCall","setActiveVideoCall","meetingNotification","setMeetingNotification","showNotificationPanel","setShowNotificationPanel","unreadCount","setUnreadCount","messagesEndRef","currentUsername","localStorage","getItem","fetchMessages","fetchMeetings","fetchNotifications","fetchUnreadCount","interval","setInterval","clearInterval","scrollToBottom","response","getMessages","data","err","getAll","chatMeetings","filter","meeting","chat","meetingNotifications","n","notification_type","related_meeting","read","length","latestNotification","find","m","id","organizer_name","getUnreadCount","unread_count","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","e","preventDefault","trim","messageData","content","createMessage","_err$response","_err$response$data","handleMeetingCreated","handleMeetingNotificationJoin","handleMeetingNotificationDismiss","handleJoinMeetingFromNotification","notification","handleMarkNotificationAsRead","handleDismissNotification","notificationId","prev","markAsRead","map","handleClearAllNotifications","clearAll","handleJoinMeeting","joinMeeting","handleStartMeeting","startMeeting","formatTime","dateString","Date","toLocaleTimeString","hour","minute","formatDateTime","toLocaleString","getMeetingStatusColor","status","style","textAlign","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","display","flexDirection","height","border","borderRadius","overflow","position","top","left","right","backgroundColor","color","zIndex","fontSize","borderBottom","justifyContent","alignItems","margin","p","username","join","gap","onClick","className","width","alert","title","description","organizer","scheduled_at","undefined","duration_minutes","created_at","toISOString","document","body","innerHTML","maxHeight","overflowY","fontWeight","flex","marginBottom","marginTop","message","isOwnMessage","sender_name","maxWidth","boxShadow","wordWrap","opacity","ref","onSubmit","borderTop","type","value","onChange","target","placeholder","disabled","onClose","onMeetingCreated","onStartVideoCall","meetingId","onJoin","onDismiss","onJoinMeeting","onDismissNotification","onMarkAsRead","onClearAll","_c","$RefreshReg$"],"sources":["C:/Users/soham_jhyepxn/Desktop/skill-swap/Skill-Swap_Access_Denied/skillswap_frontend/src/components/Chat.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { messagesAPI, meetingsAPI, notificationsAPI } from '../services/api';\r\nimport { Message, MessageForm, Meeting, Notification } from '../types';\r\nimport MeetingModal from './MeetingModal';\r\nimport VideoCall from './VideoCall';\r\nimport MeetingNotification from './MeetingNotification';\r\nimport NotificationPanel from './NotificationPanel';\r\n\r\n// Test if VideoCall component is imported\r\nconsole.log('VideoCall component imported:', VideoCall);\r\n\r\ninterface ChatProps {\r\n  chatId: number;\r\n  participants: { id: number; username: string }[];\r\n}\r\n\r\nconst Chat: React.FC<ChatProps> = ({ chatId, participants }) => {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [meetings, setMeetings] = useState<Meeting[]>([]);\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [newMessage, setNewMessage] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [sending, setSending] = useState<boolean>(false);\r\n  const [error, setError] = useState<string>('');\r\n  const [showMeetingModal, setShowMeetingModal] = useState<boolean>(false);\r\n  const [showMeetings, setShowMeetings] = useState<boolean>(false);\r\n  const [activeVideoCall, setActiveVideoCall] = useState<Meeting | null>(null);\r\n  const [meetingNotification, setMeetingNotification] = useState<Meeting | null>(null);\r\n  const [showNotificationPanel, setShowNotificationPanel] = useState<boolean>(false);\r\n  const [unreadCount, setUnreadCount] = useState<number>(0);\r\n  \r\n  // Debug logging\r\n  console.log('Chat component rendered, activeVideoCall:', activeVideoCall);\r\n  \r\n  // Add a visible indicator if activeVideoCall exists\r\n  if (activeVideoCall) {\r\n    console.log('ACTIVE VIDEO CALL EXISTS!', activeVideoCall);\r\n  }\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const currentUsername = localStorage.getItem('username');\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n    fetchMeetings();\r\n    fetchNotifications();\r\n    fetchUnreadCount();\r\n    \r\n    // Poll for new messages and notifications every 10 seconds\r\n    const interval = setInterval(() => {\r\n      fetchMessages();\r\n      fetchNotifications();\r\n      fetchUnreadCount();\r\n    }, 10000);\r\n    \r\n    return () => {\r\n      console.log('Clearing polling interval');\r\n      clearInterval(interval);\r\n    };\r\n  }, [chatId]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const fetchMessages = async () => {\r\n    try {\r\n      const response = await messagesAPI.getMessages(chatId);\r\n      setMessages(response.data);\r\n    } catch (err: any) {\r\n      setError('Failed to load messages. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchMeetings = async () => {\r\n    try {\r\n      const response = await meetingsAPI.getAll();\r\n      // Filter meetings for this chat\r\n      const chatMeetings = response.data.filter((meeting: any) => meeting.chat === chatId);\r\n      setMeetings(chatMeetings);\r\n    } catch (err: any) {\r\n      console.error('Failed to load meetings:', err);\r\n    }\r\n  };\r\n\r\n  const fetchNotifications = async () => {\r\n    try {\r\n      const response = await notificationsAPI.getAll();\r\n      setNotifications(response.data);\r\n      \r\n      // Check for meeting notifications\r\n      const meetingNotifications = response.data.filter((n: any) => \r\n        n.notification_type === 'MEETING_STARTED' && \r\n        n.related_meeting && \r\n        !n.read\r\n      );\r\n      \r\n      if (meetingNotifications.length > 0) {\r\n        const latestNotification = meetingNotifications[0];\r\n        // Find the corresponding meeting\r\n        const meeting = meetings.find(m => m.id === latestNotification.related_meeting);\r\n        if (meeting && meeting.organizer_name !== currentUsername) {\r\n          setMeetingNotification(meeting);\r\n        }\r\n      }\r\n    } catch (err: any) {\r\n      console.error('Failed to load notifications:', err);\r\n    }\r\n  };\r\n\r\n  const fetchUnreadCount = async () => {\r\n    try {\r\n      const response = await notificationsAPI.getUnreadCount();\r\n      setUnreadCount(response.data.unread_count);\r\n    } catch (err: any) {\r\n      console.error('Failed to get unread count:', err);\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const handleSendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim()) return;\r\n\r\n    setSending(true);\r\n    setError('');\r\n\r\n    try {\r\n      const messageData: MessageForm = {\r\n        chat: chatId,\r\n        content: newMessage.trim(),\r\n      };\r\n\r\n      const response = await messagesAPI.createMessage(messageData);\r\n      setMessages([...messages, response.data]);\r\n      setNewMessage('');\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.error || 'Failed to send message. Please try again.');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const handleMeetingCreated = (meeting: Meeting) => {\r\n    setMeetings([...meetings, meeting]);\r\n  };\r\n\r\n  const handleMeetingNotificationJoin = (meeting: Meeting) => {\r\n    setActiveVideoCall(meeting);\r\n    setMeetingNotification(null);\r\n  };\r\n\r\n  const handleMeetingNotificationDismiss = () => {\r\n    setMeetingNotification(null);\r\n  };\r\n\r\n  const handleJoinMeetingFromNotification = (meeting: Meeting) => {\r\n    setActiveVideoCall(meeting);\r\n    // Mark notification as read\r\n    const notification = notifications.find(n => \r\n      n.notification_type === 'MEETING_STARTED' && \r\n      n.related_meeting === meeting.id\r\n    );\r\n    if (notification) {\r\n      handleMarkNotificationAsRead(notification.id);\r\n    }\r\n  };\r\n\r\n  const handleDismissNotification = (notificationId: number) => {\r\n    setNotifications(prev => prev.filter(n => n.id !== notificationId));\r\n  };\r\n\r\n  const handleMarkNotificationAsRead = async (notificationId: number) => {\r\n    try {\r\n      await notificationsAPI.markAsRead(notificationId);\r\n      setNotifications(prev => \r\n        prev.map(n => n.id === notificationId ? { ...n, read: true } : n)\r\n      );\r\n      fetchUnreadCount();\r\n    } catch (err: any) {\r\n      console.error('Failed to mark notification as read:', err);\r\n    }\r\n  };\r\n\r\n  const handleClearAllNotifications = async () => {\r\n    try {\r\n      await notificationsAPI.clearAll();\r\n      setNotifications([]);\r\n      setMeetingNotification(null);\r\n      setUnreadCount(0);\r\n      console.log('All notifications cleared');\r\n    } catch (err: any) {\r\n      console.error('Failed to clear notifications:', err);\r\n    }\r\n  };\r\n\r\n  const handleJoinMeeting = async (meeting: Meeting) => {\r\n    try {\r\n      await meetingsAPI.joinMeeting(meeting.id);\r\n      setActiveVideoCall(meeting);\r\n    } catch (err: any) {\r\n      setError('Failed to join meeting. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleStartMeeting = async (meeting: Meeting) => {\r\n    console.log('Starting meeting:', meeting);\r\n    try {\r\n      await meetingsAPI.startMeeting(meeting.id);\r\n      console.log('Meeting started successfully, setting active video call');\r\n      setActiveVideoCall(meeting);\r\n      fetchMeetings(); // Refresh meetings list\r\n    } catch (err: any) {\r\n      console.error('Failed to start meeting:', err);\r\n      setError('Failed to start meeting. Please try again.');\r\n    }\r\n  };\r\n\r\n  const formatTime = (dateString: string) => {\r\n    return new Date(dateString).toLocaleTimeString([], { \r\n      hour: '2-digit', \r\n      minute: '2-digit' \r\n    });\r\n  };\r\n\r\n  const formatDateTime = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString();\r\n  };\r\n\r\n  const getMeetingStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'ONGOING':\r\n        return '#28a745';\r\n      case 'COMPLETED':\r\n        return '#6c757d';\r\n      case 'CANCELLED':\r\n        return '#dc3545';\r\n      default:\r\n        return '#007bff';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ textAlign: 'center', padding: '20px' }}>\r\n        <p>Loading chat...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ \r\n      display: 'flex', \r\n      flexDirection: 'column', \r\n      height: '500px',\r\n      border: '1px solid #ddd',\r\n      borderRadius: '8px',\r\n      overflow: 'hidden',\r\n      position: 'relative'\r\n    }}>\r\n      {/* Debug indicator */}\r\n      {activeVideoCall && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '0px',\r\n          left: '0px',\r\n          right: '0px',\r\n          backgroundColor: 'red',\r\n          color: 'white',\r\n          padding: '5px',\r\n          textAlign: 'center',\r\n          zIndex: 1000,\r\n          fontSize: '12px'\r\n        }}>\r\n          ðŸš¨ VIDEO CALL ACTIVE - Meeting ID: {activeVideoCall.id}\r\n        </div>\r\n      )}\r\n      {/* Chat Header */}\r\n      <div style={{\r\n        backgroundColor: '#f8f9fa',\r\n        padding: '15px',\r\n        borderBottom: '1px solid #ddd',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <div>\r\n          <h3 style={{ margin: 0 }}>Chat</h3>\r\n          <p style={{ margin: 0, fontSize: '14px', color: '#666' }}>\r\n            {participants.map(p => p.username).join(' & ')}\r\n          </p>\r\n        </div>\r\n        <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n          <button\r\n            onClick={() => setShowNotificationPanel(!showNotificationPanel)}\r\n            className=\"btn btn-outline-info\"\r\n            style={{ \r\n              fontSize: '12px', \r\n              padding: '5px 10px',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            ðŸ”” Notifications\r\n            {unreadCount > 0 && (\r\n              <span style={{\r\n                position: 'absolute',\r\n                top: '-5px',\r\n                right: '-5px',\r\n                backgroundColor: '#dc3545',\r\n                color: 'white',\r\n                borderRadius: '50%',\r\n                width: '18px',\r\n                height: '18px',\r\n                fontSize: '10px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n              }}>\r\n                {unreadCount}\r\n              </span>\r\n            )}\r\n          </button>\r\n          <button\r\n            onClick={() => setShowMeetings(!showMeetings)}\r\n            className=\"btn btn-outline-primary\"\r\n            style={{ fontSize: '12px', padding: '5px 10px' }}\r\n          >\r\n            ðŸ“… Meetings ({meetings.length})\r\n          </button>\r\n          <button\r\n            onClick={() => setShowMeetingModal(true)}\r\n            className=\"btn btn-success\"\r\n            style={{ fontSize: '12px', padding: '5px 10px' }}\r\n          >\r\n            ðŸš€ Start Meeting\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              alert('Test button clicked!');\r\n              console.log('Test video call button clicked');\r\n              setActiveVideoCall({\r\n                id: 999,\r\n                title: 'Test Meeting',\r\n                description: 'Test meeting for debugging',\r\n                organizer: 1,\r\n                organizer_name: 'Test User',\r\n                chat: chatId,\r\n                scheduled_at: undefined,\r\n                duration_minutes: 30,\r\n                status: 'ONGOING',\r\n                created_at: new Date().toISOString()\r\n              });\r\n            }}\r\n            className=\"btn btn-warning\"\r\n            style={{ \r\n              fontSize: '12px', \r\n              padding: '5px 10px',\r\n              backgroundColor: 'orange',\r\n              color: 'white',\r\n              border: '2px solid red'\r\n            }}\r\n          >\r\n            ðŸ§ª Test Video Call\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              alert('Simple test button clicked!');\r\n              document.body.innerHTML += '<div style=\"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:red;color:white;padding:20px;z-index:9999;\">SIMPLE TEST - BUTTONS WORK!</div>';\r\n            }}\r\n            className=\"btn btn-danger\"\r\n            style={{ \r\n              fontSize: '12px', \r\n              padding: '5px 10px',\r\n              backgroundColor: 'red',\r\n              color: 'white',\r\n              border: '2px solid black'\r\n            }}\r\n          >\r\n            ðŸ”¥ Simple Test\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Meetings Panel */}\r\n      {showMeetings && (\r\n        <div style={{\r\n          backgroundColor: '#f8f9fa',\r\n          borderBottom: '1px solid #ddd',\r\n          padding: '15px',\r\n          maxHeight: '200px',\r\n          overflowY: 'auto'\r\n        }}>\r\n          <h4 style={{ margin: '0 0 10px 0', fontSize: '14px' }}>ðŸ“… Meetings</h4>\r\n          {meetings.length === 0 ? (\r\n            <p style={{ fontSize: '12px', color: '#666', margin: 0 }}>\r\n              No meetings scheduled. Start a meeting to begin video calls!\r\n            </p>\r\n          ) : (\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\r\n              {meetings.map((meeting) => (\r\n                <div key={meeting.id} style={{\r\n                  backgroundColor: 'white',\r\n                  padding: '10px',\r\n                  borderRadius: '5px',\r\n                  border: '1px solid #ddd'\r\n                }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                    <div>\r\n                      <h5 style={{ margin: '0 0 5px 0', fontSize: '13px' }}>{meeting.title}</h5>\r\n                      <p style={{ margin: 0, fontSize: '11px', color: '#666' }}>\r\n                        {meeting.scheduled_at ? 'ðŸ“… Scheduled' : 'ðŸš€ Instant'}\r\n                        {meeting.scheduled_at && ` - ${formatDateTime(meeting.scheduled_at)}`}\r\n                      </p>\r\n                      <p style={{ margin: '5px 0 0 0', fontSize: '11px' }}>\r\n                        <span style={{ \r\n                          color: getMeetingStatusColor(meeting.status),\r\n                          fontWeight: 'bold'\r\n                        }}>\r\n                          {meeting.status}\r\n                        </span>\r\n                        {meeting.duration_minutes && ` â€¢ ${meeting.duration_minutes} min`}\r\n                      </p>\r\n                    </div>\r\n                    <div style={{ display: 'flex', gap: '5px' }}>\r\n                      {meeting.status === 'SCHEDULED' && meeting.organizer_name === currentUsername && (\r\n                        <button\r\n                          onClick={() => handleStartMeeting(meeting)}\r\n                          className=\"btn btn-success\"\r\n                          style={{ fontSize: '10px', padding: '3px 8px' }}\r\n                        >\r\n                          Start\r\n                        </button>\r\n                      )}\r\n                      {meeting.status === 'ONGOING' && (\r\n                        <button\r\n                          onClick={() => handleJoinMeeting(meeting)}\r\n                          className=\"btn btn-primary\"\r\n                          style={{ fontSize: '10px', padding: '3px 8px' }}\r\n                        >\r\n                          Join\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Messages Area */}\r\n      <div style={{\r\n        flex: 1,\r\n        overflowY: 'auto',\r\n        padding: '15px',\r\n        backgroundColor: '#f9f9f9'\r\n      }}>\r\n        {error && (\r\n          <div className=\"alert alert-danger\" style={{ marginBottom: '15px' }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {messages.length === 0 ? (\r\n          <div style={{ \r\n            textAlign: 'center', \r\n            color: '#666', \r\n            marginTop: '50px' \r\n          }}>\r\n            <p>No messages yet. Start the conversation!</p>\r\n            <p style={{ fontSize: '14px' }}>\r\n              ðŸ’¡ Share tips, ask questions, or discuss your skills\r\n            </p>\r\n            <p style={{ fontSize: '14px' }}>\r\n              ðŸš€ Click \"Start Meeting\" to begin video calls\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\r\n            {messages.map((message) => {\r\n              const isOwnMessage = message.sender_name === currentUsername;\r\n              return (\r\n                <div\r\n                  key={message.id}\r\n                  style={{\r\n                    display: 'flex',\r\n                    justifyContent: isOwnMessage ? 'flex-end' : 'flex-start',\r\n                    marginBottom: '10px'\r\n                  }}\r\n                >\r\n                  <div style={{\r\n                    maxWidth: '70%',\r\n                    padding: '10px 15px',\r\n                    borderRadius: '15px',\r\n                    backgroundColor: isOwnMessage ? '#007bff' : 'white',\r\n                    color: isOwnMessage ? 'white' : '#333',\r\n                    boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n                    wordWrap: 'break-word'\r\n                  }}>\r\n                    <div style={{ \r\n                      fontSize: '12px', \r\n                      marginBottom: '5px',\r\n                      opacity: 0.8\r\n                    }}>\r\n                      {message.sender_name}\r\n                    </div>\r\n                    <div style={{ marginBottom: '5px' }}>\r\n                      {message.content}\r\n                    </div>\r\n                    <div style={{ \r\n                      fontSize: '10px', \r\n                      opacity: 0.7,\r\n                      textAlign: 'right'\r\n                    }}>\r\n                      {formatTime(message.created_at)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Message Input */}\r\n      <form onSubmit={handleSendMessage} style={{\r\n        padding: '15px',\r\n        borderTop: '1px solid #ddd',\r\n        backgroundColor: 'white'\r\n      }}>\r\n        <div style={{ display: 'flex', gap: '10px' }}>\r\n          <input\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            placeholder=\"Type your message...\"\r\n            style={{\r\n              flex: 1,\r\n              padding: '10px',\r\n              border: '1px solid #ddd',\r\n              borderRadius: '5px',\r\n              fontSize: '14px'\r\n            }}\r\n            disabled={sending}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={sending || !newMessage.trim()}\r\n            className=\"btn btn-primary\"\r\n            style={{ padding: '10px 20px' }}\r\n          >\r\n            {sending ? 'Sending...' : 'Send'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Meeting Modal */}\r\n      {showMeetingModal && (\r\n        <MeetingModal\r\n          chatId={chatId}\r\n          participants={participants}\r\n          onClose={() => setShowMeetingModal(false)}\r\n          onMeetingCreated={handleMeetingCreated}\r\n          onStartVideoCall={setActiveVideoCall}\r\n        />\r\n      )}\r\n\r\n      {/* Video Call */}\r\n      {activeVideoCall && (\r\n        <div>\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: '10px',\r\n            right: '10px',\r\n            backgroundColor: 'red',\r\n            color: 'white',\r\n            padding: '10px',\r\n            zIndex: 3000,\r\n            borderRadius: '5px'\r\n          }}>\r\n            DEBUG: Video Call Active - Meeting ID: {activeVideoCall.id}\r\n          </div>\r\n          \r\n          <VideoCall\r\n            meetingId={activeVideoCall.id}\r\n            participants={participants}\r\n            onClose={() => setActiveVideoCall(null)}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Meeting Notification */}\r\n      {meetingNotification && (\r\n        <MeetingNotification\r\n          meeting={meetingNotification}\r\n          onJoin={handleMeetingNotificationJoin}\r\n          onDismiss={handleMeetingNotificationDismiss}\r\n        />\r\n      )}\r\n\r\n      {/* Notification Panel */}\r\n      {showNotificationPanel && (\r\n        <NotificationPanel\r\n          notifications={notifications}\r\n          onJoinMeeting={handleJoinMeetingFromNotification}\r\n          onDismissNotification={handleDismissNotification}\r\n          onMarkAsRead={handleMarkNotificationAsRead}\r\n          onClearAll={handleClearAllNotifications}\r\n          onClose={() => setShowNotificationPanel(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}