{"ast":null,"code":"import React,{useState,useEffect}from'react';import{profilesAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilePage=()=>{const[profile,setProfile]=useState(null);const[formData,setFormData]=useState({bio:''});const[error,setError]=useState('');const[success,setSuccess]=useState('');const[loading,setLoading]=useState(false);const[isEditing,setIsEditing]=useState(false);useEffect(()=>{loadProfile();},[]);const loadProfile=async()=>{try{const data=await profilesAPI.getProfile();setProfile(data);setFormData({bio:data.bio||''});}catch(err){setError('Failed to load profile. Please try again.');}};const handleChange=e=>{const value=e.target.type==='checkbox'?e.target.checked:e.target.value;setFormData({...formData,[e.target.name]:value});};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');setSuccess('');try{await profilesAPI.updateProfile(formData);setSuccess('Profile updated successfully!');setIsEditing(false);loadProfile();}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to update profile. Please try again.');}finally{setLoading(false);}};if(!profile){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'50px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:'600px',margin:'50px auto'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0'},children:\"Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:success}),isEditing?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bio\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"bio\",name:\"bio\",className:\"form-control\",value:formData.bio||'',onChange:handleChange,placeholder:\"Tell us about yourself...\",rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Saving...':'Save Changes'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>{setIsEditing(false);setFormData({bio:profile.bio||''});},children:\"Cancel\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Profile Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Username:\"}),\" \",profile.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profile.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Bio:\"}),\" \",profile.bio||'No bio specified']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Member Since:\"}),\" \",new Date(profile.created_at).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setIsEditing(true),children:\"Edit Profile\"})]})]})]})})});};export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","profilesAPI","jsx","_jsx","jsxs","_jsxs","ProfilePage","profile","setProfile","formData","setFormData","bio","error","setError","success","setSuccess","loading","setLoading","isEditing","setIsEditing","loadProfile","data","getProfile","err","handleChange","e","value","target","type","checked","name","handleSubmit","preventDefault","updateProfile","_err$response","_err$response$data","response","className","children","style","textAlign","marginTop","role","maxWidth","margin","onSubmit","htmlFor","id","onChange","placeholder","rows","display","gap","disabled","onClick","marginBottom","username","email","Date","created_at","toLocaleDateString"],"sources":["C:/Users/soham_jhyepxn/Desktop/skill-swap/Skill-Swap_Access_Denied/skillswap_frontend/src/pages/ProfilePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { profilesAPI } from '../services/api';\r\nimport { UserProfile } from '../types';\r\n\r\nconst ProfilePage: React.FC = () => {\r\n  const [profile, setProfile] = useState<UserProfile | null>(null);\r\n  const [formData, setFormData] = useState<Partial<UserProfile>>({\r\n    bio: '',\r\n  });\r\n  const [error, setError] = useState<string>('');\r\n  const [success, setSuccess] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [isEditing, setIsEditing] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    loadProfile();\r\n  }, []);\r\n\r\n  const loadProfile = async () => {\r\n    try {\r\n      const data = await profilesAPI.getProfile();\r\n      setProfile(data);\r\n      setFormData({\r\n        bio: data.bio || '',\r\n      });\r\n    } catch (err: any) {\r\n      setError('Failed to load profile. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const value = e.target.type === 'checkbox' ? (e.target as HTMLInputElement).checked : e.target.value;\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      await profilesAPI.updateProfile(formData);\r\n      setSuccess('Profile updated successfully!');\r\n      setIsEditing(false);\r\n      loadProfile();\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.error || 'Failed to update profile. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!profile) {\r\n    return (\r\n      <div className=\"container\">\r\n        <div style={{ textAlign: 'center', marginTop: '50px' }}>\r\n          <div className=\"spinner-border\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div style={{ maxWidth: '600px', margin: '50px auto' }}>\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <h2 style={{ margin: '0' }}>Profile</h2>\r\n          </div>\r\n          \r\n          <div className=\"card-body\">\r\n            {error && (\r\n              <div className=\"alert alert-danger\">\r\n                {error}\r\n              </div>\r\n            )}\r\n            \r\n            {success && (\r\n              <div className=\"alert alert-success\">\r\n                {success}\r\n              </div>\r\n            )}\r\n\r\n            {isEditing ? (\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"bio\">Bio</label>\r\n                  <textarea\r\n                    id=\"bio\"\r\n                    name=\"bio\"\r\n                    className=\"form-control\"\r\n                    value={formData.bio || ''}\r\n                    onChange={handleChange}\r\n                    placeholder=\"Tell us about yourself...\"\r\n                    rows={4}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary\"\r\n                    disabled={loading}\r\n                  >\r\n                    {loading ? 'Saving...' : 'Save Changes'}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-secondary\"\r\n                    onClick={() => {\r\n                      setIsEditing(false);\r\n                      setFormData({ bio: profile.bio || '' });\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            ) : (\r\n              <div>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3>Profile Information</h3>\r\n                  <p><strong>Username:</strong> {profile.username}</p>\r\n                  <p><strong>Email:</strong> {profile.email}</p>\r\n                  <p><strong>Bio:</strong> {profile.bio || 'No bio specified'}</p>\r\n                  <p><strong>Member Since:</strong> {new Date(profile.created_at).toLocaleDateString()}</p>\r\n                </div>\r\n                \r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => setIsEditing(true)}\r\n                >\r\n                  Edit Profile\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfilePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}